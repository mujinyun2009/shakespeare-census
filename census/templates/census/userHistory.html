{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="wrapper">
<ul>
<li><a class="not.active" href="{% url 'homepage' %}"><p class="sansserif">
Home</p></a></li>
<li><a class="not.active" href="{% url 'index' %}"><p class="sansserif">
Titles</p></a></li>
<li><a class="not.active" href="{% url 'copylist' %}"><p class="sansserif">
Copy</p></a></li>
<li>
    <a class="not.active" href="{% url 'submission' %}" class="dropbtn"><p class="sansserif">Submission</p></a>
</li>
{% if user.is_authenticated %}
  {% else %}
<li><a class="not.active" href="{% url 'register' %}"><p class="sansserif">
Register</p></a></li>
   {% endif %}

<li class="dropdown">
<a href="" class="dropbtn" data-toggle="dropdown" role="button" aria-expanded="false">  <p class = sansserif>
Account</p></a>
<div class="dropdown-content">
  <a href="{% url 'profile' %}"><p class = sansserif>my profile</p></a>
  <a href="{% url 'user_history' %}" class="active2"><p class = sansserif>my history</p></a>
 {% if user.is_authenticated %}
<a href="{% url 'logout_user' %}"><p class = sansserif>logout</p></a>
  {% else %}
  <a href="{% url 'login_user' %}"><p class = sansserif>login</p></a>
   {% endif %}
</div>
</li>

</ul>
</div>

<br>
<br>
<div>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<div class = "history">Your contributions: </div>
<br>
<br>
<div class="container">
<table class="table table-striped" align="center" style="width:70%">
	<thead>
    <tr>
		 <th colspan=4>Copies you have submitted</th>
	  </tr>
  <tbody>
	{% if submissions %}
	{% for submission in submissions %}
		<tr>
			<td>{{ submission }}<td>
        <td> <a href="#submissionModal" role="button" class="editbutton" data-toggle="modal">Details</td>
          <div id="submissionModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title">Copy Details:</h4>
                </div>
                <div class="modal-body">
              			<p>Title: {{ submission.issue.edition.title }}</p>
             			  <p>Edition: {{ submission.issue.edition }}</p>
             			  <p>Issue: {{ submission.issue }}</p>
             			  <p>Thumbnail URL: {{ submission.thumbnail_URL }}</p>
             			  <p> NSC: {{ submission.NSC }}</p>
             			  <p> Owner: {{ submission.Owner }}</p>
                    <p>Shelfmark: {{ submission.Shelfmark }}</p>
                    <p>Height: {{ submission.Height }}</p>
                    <p>Width: {{ submission.Width }}</p>
                    <p> Marginalia: {{ submission.Marginalia }}</p>
                    <p>Condition: {{ submission.Condition }}</p>
                    <p>Binding: {{ submission.Binding }}</p>
                    <p>Submitted by: {{ submission.created_by }}</p>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

			<!-- <td><a href="{% url 'copy_detail' submission.id %}" class="editbutton" role="button" onclick="return popup(this);">Detail</a></td> -->
			<td><a href="{% url 'edit_copy_submission' submission.id %}" class="editbutton" role="button" onclick="return popup(this);">Edit</a></td>
		</tr>
	{% endfor %}
	{% else %}
		<tr>
			<td>None, so far! Click <a href="{% url 'submission' %}" class="editbutton" role="button">here</a> to submit some.<td>
		</tr>
	{% endif %}
  </tbody>
</table>
</div>

<br>
<br>

<div class="container">
<table class="table table-striped" align="center" style="width:70%">
  <thead>
  <tr class="spaceUnder">
		<th colspan=4>Copies you have edited</th>
	</tr>
</thead>
<tbody>
	{% if editted_copies %}
	{% for copy in editted_copies %}
		<tr class="spacer">
			<td>{{ copy }}<td>
        <td> <a href="#detailModal" role="button" class="editbutton" data-toggle="modal">Details</td>
          <div id="detailModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title">Copy Details:</h4>
                </div>
                <div class="modal-body">
              			<p>Title: {{ copy.issue.edition.title }}</p>
             			  <p>Edition: {{ copy.issue.edition }}</p>
             			  <p>Issue: {{ copy.issue }}</p>
             			  <p>Thumbnail URL: {{ copy.thumbnail_URL }}</p>
             			  <p> NSC: {{ copy.NSC }}</p>
             			  <p> Owner: {{ copy.Owner }}</p>
                    <p>Shelfmark: {{ copy.Shelfmark }}</p>
                    <p>Height: {{ copy.Height }}</p>
                    <p>Width: {{ copy.Width }}</p>
                    <p> Marginalia: {{ copy.Marginalia }}</p>
                    <p>Condition: {{ copy.Condition }}</p>
                    <p>Binding: {{ copy.Binding }}</p>
                    <p>Submitted by: {{ copy.created_by }}</p>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

			<!-- <td><a href="{% url 'copy_detail' copy.id %}" class="editbutton" role="button" onfocus="parent_disable();" onclick="return popup(this);">Details</a></td> -->
          <td><a href="{% url 'edit_copy_submission' copy.id %}" class="editbutton" role="button" onclick="return popup(this);">Edit</a></td>

    </tr>
	{% endfor %}
	{% else %}
		<tr class="spaceUnder">
			<td>None, so far!<td>
		</tr>
	{% endif %}
</tbody>
</table>
</div>
</div>

<script>
function popup(triggeringLink) {
  var href = triggeringLink.href;
  var name = triggeringLink.name;
  new_win = window.open(href, name, "height=800,width=1000,left=300,top=200,resizable=yes,scrollbars=yes");
  new_win.focus();
  return false;
}
</script>
{% endblock content %}

<html>
{% load static %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="/static/census/bootstrap-modal.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'census/modal.css' %}"/>

<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>


<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 align="left" class="modal-title">add title</h4>
      </div>
      <div class="modal-body">
		<form id="myForm" method="post" action="{% url 'add_title' %}">
      {% csrf_token %}
       {{ title_form.as_p }}
    		<button id="myFormSubmit" type="submit">Submit</button>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
	</div>
</div>

<div id="confirm" class="modal hide fade in" aria-hidden="true">
    <div class="modal-header">
        <label id="responsestatus"></label>
    </div>
</div>

<script>
    $(function(){
       $('myForm').on('submit', function(e){
            e.preventDefault();
            $.ajax({
                url: "addTitle",
                type: "POST",
                data: $("myForm").serialize(),
                success: function(data){
                  $('responsestatus').val(data);
                   $('confirm').modal('show');   
                }
            });
       });
    });
</script>
</html>

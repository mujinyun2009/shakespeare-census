{% extends "base.html" %}
{% load static %}
{% block content %}
<head>
<title>Shakespeare Census</title>
</head>
<script type="text/javascript" src="/static/census/bootstrap-modal.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'census/modal.css' %}" />

{%if result_list%}
<hr class="style14" width = "50%"></hr>
	<p class="sansserifgrey" align="center">
	Find searches below.
	</p>

<hr class = "style14" width = "50%"></hr>

</br>
<!-- <center> -->
<table class="table table-striped" align="center" style="width:70%">
  <thead>
<th colspan="8">Books found:</th>
</thead>
<tbody>
<tr>
<td class="subhead">Title</td>
<td class="subhead">Year Published</td>
<td class="subhead">Edition Number</td>
<td class="subhead">ESTC</td>
<td class="subhead">STC/Wing</td>
<td class="subhead">Owner</td>
<td class="subhead"></td>
<td class="subhead"></td>
</tr>
<tr>
{% for copy in result_list %}
<td>{{ copy.issue.edition.title}}</td>
<td>{{ copy.issue.year }}</td>
<td>{{ copy.issue.edition.Edition_number}}</td>
<td>{{ copy.issue.ESTC }}</td>
<td>{{ copy.issue.STC_Wing }}</td>
<td>{{ copy.Owner }}</td>

<td> <a data-target="#copyModal" role="button" class="editbutton" data-toggle="modal">Details</td>
  {% include "census/copy_modal.html" %}

{% if user.is_authenticated %}
<td><a href="{% url 'edit_copy_submission' copy.id %}" class="resultbuttons" role="button" onclick="return popup(this);">Edit</a></td>
{% endif %}
</tr>
{% endfor %}
</tbody>
</table>
<br>

<div class="pagination">
	  <table class = "pagenavigator" align="center">
		<tr class ="pagenavigator">
			{% if result_list.has_previous %}
			<td class = "hoverspecial"> <a href="?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ result_list.previous_page_number }}" class="paginator"><</a></td>
			{% endif %}

		{% for page in result_list.paginator.page_range %}
			{% if page <= result_list.number|add:"3" %}
				{% if page >= result_list.number|add:"-3" %}
				{% if page == result_list.number %}
					<td class = "currentpage" width="20px">{{ page }}</td>
				{% else %}
					<td class="pagenavigator" width="20px"> <a href = "?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ page }}" class="paginator">{{ page }}</td> 
				{% endif %}
				{% endif %}
			
			{% endif %}
		{% endfor %}

			{% if result_list.has_next %}
			 <td class = "hoverspecial">	<a href="?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ result_list.next_page_number }}" class="paginator">></a></td>
			{% endif %}
		</tr>
	</table>
	Pages generated: {{ result_list.paginator.num_pages }}
</div>
<br>
<br>
{%else%}
<hr class="style14" width = "50%"></hr>
	<p class="sansserifgrey">
	No matches were found.<br> Did you misspell your query?
	</p>
<hr class="style14" width = "50%"></hr>
</div>
{% endif %}
<!-- </center> -->

<script>
function popup(triggeringLink) {
	var href = triggeringLink.href;
	var name = triggeringLink.name;
	var win = window.open(href, name, "height=800,width=1000,resizable=yes,scrollbars=yes");
	win.focus();
	return false;
}
</script>
</div>
{% endblock content %}

{% extends "base.html" %}
{% load static %}
{% block content %}
<head>
<title>Shakespeare Census</title>
</head>
<script type="text/javascript" src="/static/census/bootstrap-modal.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'census/modal.css' %}" />

{%if result_list%}
<hr class="style14" width = "50%"></hr>
	<p class="sansserifgrey" align="center">
	Find searches below.
	</p>

<hr class = "style14" width = "50%"></hr>

</br>
<!-- <center> -->
<table class="table table-striped" align="center" style="width:70%">
  <thead>
<th colspan="8">Books found:</th>
</thead>
<tbody>
<tr>
<td class="subhead">Title</td>
<td class="subhead">Year Published</td>
<td class="subhead">Edition Number</td>
<td class="subhead">ESTC</td>
<td class="subhead">STC/Wing</td>
<td class="subhead">Owner</td>
<td class="subhead"></td>
<td class="subhead"></td>
</tr>
<tr>
{% for copy in result_list %}
<td>{{ copy.issue.edition.title}}</td>
<td>{{ copy.issue.year }}</td>
<td>{{ copy.issue.edition.Edition_number}}</td>
<td>{{ copy.issue.ESTC }}</td>
<td>{{ copy.issue.STC_Wing }}</td>
<td>{{ copy.Owner }}</td>

<td> <a data-target="#copyModal" role="button" class="editbutton" data-toggle="modal">Details</td>
  {% include "census/copy_modal.html" %}

{% if user.is_authenticated %}
<td><a href="{% url 'edit_copy_submission' copy.id %}" class="resultbuttons" role="button" onclick="return popup(this);">Edit</a></td>
{% endif %}
</tr>
{% endfor %}
</tbody>
</table>

<div class="pagination" style="text-align:center">
		<span class="step-links">
			<span class="current">
				Page {{ result_list.number }} of {{ result_list.paginator.num_pages }}
			</span>

			{% if result_list.has_previous %}
				<a href="?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ result_list.previous_page_number }}">previous</a>
			{% endif %}

			{% if result_list.has_next %}
				<a href="?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ result_list.next_page_number }}">next</a>
			{% endif %}
		</span>
</div>
<br>
<br>
{%else%}
<hr class="style14" width = "50%"></hr>
	<p class="sansserifgrey">
	No matches were found.<br> Did you misspell your query?
	</p>
<hr class="style14" width = "50%"></hr>
</div>
{% endif %}
<!-- </center> -->

<script>
function popup(triggeringLink) {
	var href = triggeringLink.href;
	var name = triggeringLink.name;
	var win = window.open(href, name, "height=800,width=1000,resizable=yes,scrollbars=yes");
	win.focus();
	return false;
}
</script>
</div>
{% endblock content %}
